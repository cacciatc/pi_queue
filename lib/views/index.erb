<head>
  <link rel="stylesheet" href="css/blueprint/screen.css" type="text/css" media="screen, projection">
  <link rel="stylesheet" href="css/blueprint/print.css" type="text/css" media="print">	
  <!--[if lt IE 8]><link rel="stylesheet" href="css/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]-->
  <script src="js/prototype.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/builder.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/effects.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/dragdrop.js" type="text/javascript" charset="utf-8"></script>
</head>

  <div class="container">
  <div class="span-24 last">
    <h1>pi-queue</h1>
    <div class="loud">priority-idea-queue</div>

    <div class="box">
    <h2>Current Project</h2>
    <%= 
      Project.current.inject('<ul id="current_project">') do |str,p| 
        str += "<li id=\"#{p.mid}\">#{p.name} #{p.desc} #{p.url} #{p.submitter} #{p.created_at.asctime} <form name=\"implement\" action=\"update_current\" method=\"post\" class=\"inline\"><input type=\"submit\" value=\"Implement\" /></form></li>"
      end + '</ul>'
    %>
    </div>

    <div class="box">
    <h2>Pending Projects</h2>
    <%= 
      Project.list_pending.inject('<ul id="pending_projects">') do |str,p| 
        str += "<li id=\"pending_#{p.mid}\">#{p.name} #{p.desc} #{p.url} #{p.submitter} #{p.created_at.asctime}</li>"
      end +"<br \></ul>"
    %>
    </div>

    <div class="box">
    <h2>Implemented Projects</h2>
    <%= 
      Project.list_implemented.inject('<ul id="implemented_projects">') do |str,p| 
        str += "<li id=\"implemented_#{p.mid}\">#{p.name} #{p.desc} #{p.url} #{p.submitter} #{p.created_at.asctime}</li>"
      end +"<br \></ul>"
    %>
    </div>

    <div class="box">
    <h2>Deleted Projects</h2>
    <%= 
      Project.list_deleted.inject('<ul id="deleted_projects">') do |str,p| 
        str += "<li id=\"deleted_#{p.mid}\">#{p.name} #{p.desc} #{p.url} #{p.submitter} #{p.created_at.asctime}</li>"
      end +"<br \></ul>"
    %>
    </div>

    <script type="text/javascript" charset="utf-8">
      Sortable.create('pending_projects', {
       containment: ["implemented_projects","deleted_projects","pending_projects"],
       dropOnEmpty: true,
       onUpdate: function() {
          new Ajax.Request("/update_rank", {
              method: "post",
              parameters: { data: Sortable.serialize('pending_projects') }
          });
        }
      }
      );
      Sortable.create("implemented_projects", {
       containment: ["implemented_projects","deleted_projects","pending_projects"],
       dropOnEmpty: true,
       onUpdate: function() {
          new Ajax.Request("/update_implemented", {
              method: "post",
              parameters: { data: Sortable.serialize('implemented_projects') }
          });
        }
      });
      Sortable.create("deleted_projects", {
       containment: ["implemented_projects","deleted_projects","pending_projects"],
        dropOnEmpty: true,
       onUpdate: function() {
          new Ajax.Request("/update_deleted", {
              method: "post",
              parameters: { data: Sortable.serialize('deleted_projects') }
          });
        }
      }
      );
    </script>
    <div class="span-24">
      <form name="create_new_project" method="post" class="inline">
      <fieldset>
        <legend>Add a new project</Legend>
        <div class="span-12 last">
        <p>
        <label for="post[project_name]">Name:</label><br \>
        <input type="text" name="post[project_name]" id="post[project_name]"\>
        </p>
        
        <p>
        <label for="post[desc]">Short Description:</label><br \>
        <input type="text" name="post[desc]" id="post[desc]"\>
        </p>
        
        <p>
        <label for="post[probs_techs]">Probs & Techs:</label><br \>
        <textarea name="post[probs_techs]" id="post[probs_techs]"></textarea>
        </p>
        </div>
        
        <div class="span-12 last">
        <p>
        <label for="post[url]">Link:</label><br \>
        <input type="text" name="post[url]" id="post[url]"\>
        </p>
        
        <p>
        <label for="post[submitter]">Submitter:</label><br \>
        <input type="text" name="post[submitter]" id="post[submitter]"\>
        </p>
        
        <p>
        <label for="post[long_desc]">Description:</label><br \>
        <textarea name="post[long_desc]" id="post[long_desc]"></textarea>
        </p>
        <p>
        <input type="submit" value="Submit"></input>
        <input type="reset" value="Cancel"></input>
        </p>
        </div>
        
      </form>
    </fieldset>
    </div>
    </div>
</div>